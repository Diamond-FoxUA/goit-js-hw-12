{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await axios('https://pixabay.com/api/', {\n      params: {\n        key: '52353734-aa83943fc4859b94495f66918',\n        q: query,\n        page: page,\n        per_page: 15,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      }\n    });\n\n    return response.data;\n  } catch(error) {\n    console.log(error);\n    return { hits: [], totalHits: 0};\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\n\nexport function createGallery(images, galleryEl) {\n  const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n    <li class=\"card\">\n      <a href=\"${largeImageURL}\" class=\"card-item-img\">\n        <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\">\n      </a>\n      <div class=\"card-description\">\n        <ul class=\"desc-item\">\n          <li class=\"desk-item-name\">Likes</li>\n          <li class=\"desk-item-value\">${likes}</li>\n        </ul>\n        <ul class=\"desc-item\">\n          <li class=\"desk-item-name\">Views</li>\n          <li class=\"desk-item-value\">${views}</li>\n        </ul>\n        <ul class=\"desc-item\">\n          <li class=\"desk-item-name\">Comments</li>\n          <li class=\"desk-item-value\">${comments}</li>\n        </ul>\n        <ul class=\"desc-item\">\n          <li class=\"desk-item-name\">Downloads</li>\n          <li class=\"desk-item-value\">${downloads}</li>\n        </ul>\n      </div>\n    </li>\n  `).join(\"\");\n\n  galleryEl.insertAdjacentHTML('beforeend', markup);\n\n  if(!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      captionPosition: 'bottom',\n    });\n  } else {\n    lightbox.refresh();\n  }\n};\n\nexport function clearGallery(galleryEl) {\n  galleryEl.innerHTML = \"\";\n}\n\nexport function showLoader(loaderEl) {\n  loaderEl.classList.remove('hidden');\n}\n\nexport function hideLoader(loaderEl) {\n  loaderEl.classList.add('hidden');\n}\n\nexport function showLoadMoreBtn(btn) {\n  btn.classList.remove('hidden');\n}\n\nexport function hideLoadMoreBtn(btn) {\n  btn.classList.add('hidden');\n}","import getImagesByQuery from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, showLoadMoreBtn, hideLoadMoreBtn } from './js/render-functions.js';\n\n//\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n//\n\nconst formEl = document.querySelector('.form');\nconst formInputEl = formEl.querySelector('input');\nconst formBtnEl = document.querySelector('.form-btn');\nconst galleryEl = document.querySelector('.gallery');\nconst loadMoreBtn = document.querySelector('.more-btn');\nconst loaderEl = document.querySelector('.loader');\n\n\nlet page = 1;\nlet currentQuery = '';\n\nformEl.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  currentQuery = formInputEl.value.trim();\n\n  if (!currentQuery) {\n    return;\n  }\n\n  page = 1;\n  clearGallery(galleryEl);\n  hideLoadMoreBtn(loadMoreBtn);\n  showLoader(loaderEl);\n\n  const { hits, totalHits } = await getImagesByQuery(currentQuery, page);\n  hideLoader(loaderEl);\n\n  if (hits.length === 0) {\n    iziToast.error({\n      message: 'some error',\n      position: 'topRight'\n    })\n    return;\n  }\n    createGallery(hits, galleryEl);\n\n  if (totalHits > hits.length) {\n    showLoadMoreBtn(loadMoreBtn);\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page ++;\n  loadMoreBtn.disabled = true;\n  hideLoadMoreBtn(loadMoreBtn);\n  showLoader(loaderEl);\n\n  const { hits, totalHits } = await getImagesByQuery(currentQuery, page);\n  hideLoader(loaderEl);\n  showLoadMoreBtn(loadMoreBtn);\n  createGallery(hits, galleryEl);\n  \n  if (galleryEl.children.length >= totalHits) {\n    hideLoadMoreBtn(loadMoreBtn);\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight'\n    });\n  }\n\n  loadMoreBtn.disabled = false;\n  smoothScroll();\n})\n\nfunction smoothScroll() {\n  const { height: cardHeight } = galleryEl.firstElementChild.getBoundingClientRect();\n  window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n}"],"names":["getImagesByQuery","query","page","axios","error","lightbox","createGallery","images","galleryEl","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","loaderEl","hideLoader","showLoadMoreBtn","btn","hideLoadMoreBtn","formEl","formInputEl","loadMoreBtn","currentQuery","event","hits","totalHits","iziToast","smoothScroll","cardHeight"],"mappings":"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"}